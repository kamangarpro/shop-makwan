<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù…Ù‚Ø§Ù„Ø§Øª Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ù¾ÙˆØ³Øª Ùˆ Ø²ÛŒØ¨Ø§ÛŒÛŒ">
    <title>Ù…Ù‚Ø§Ù„Ø§Øª Ø¢Ù…ÙˆØ²Ø´ÛŒ | ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù„ÙˆØ§Ø²Ù… Ø¢Ø±Ø§ÛŒØ´ÛŒ</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-content">
            <a href="index.html" class="logo">
                <div class="logo-icon">ğŸ’„</div>
                <span>Ù„ÙˆØ§Ø²Ù… Ø¢Ø±Ø§ÛŒØ´ÛŒ</span>
            </a>

            <div class="search-bar">
                <input type="text" id="blog-search" class="search-input" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ù‚Ø§Ù„Ø§Øª...">
                <span class="search-icon">ğŸ”</span>
            </div>

            <div class="nav-actions">
                <a href="blog.html" class="nav-btn">ğŸ“š Ù…Ù‚Ø§Ù„Ø§Øª</a>
                <a href="cart.html" class="nav-btn">
                    ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
                    <span class="cart-badge">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Navigation Menu -->
    <div class="main-nav">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Ø®Ø§Ù†Ù‡</a></li>
                <li><a href="products.html?category=Ù…Ø±Ø§Ù‚Ø¨Øª Ù¾ÙˆØ³Øª" class="nav-link">Ù…Ø±Ø§Ù‚Ø¨Øª Ù¾ÙˆØ³Øª</a></li>
                <li><a href="products.html?category=Ø¢Ø±Ø§ÛŒØ´" class="nav-link">Ø¢Ø±Ø§ÛŒØ´</a></li>
                <li><a href="products.html?category=Ù…Ø±Ø§Ù‚Ø¨Øª Ù…Ùˆ" class="nav-link">Ù…Ø±Ø§Ù‚Ø¨Øª Ù…Ùˆ</a></li>
                <li><a href="products.html?category=Ø¨Ù‡Ø¯Ø§Ø´Øª Ø´Ø®ØµÛŒ" class="nav-link">Ø¨Ù‡Ø¯Ø§Ø´Øª Ø´Ø®ØµÛŒ</a></li>
            </ul>
        </div>
    </div>

    <!-- Hero -->
    <section class="hero" style="padding: var(--spacing-xl) 0;">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">Ù…Ù‚Ø§Ù„Ø§Øª Ø¢Ù…ÙˆØ²Ø´ÛŒ</h1>
                <p class="hero-subtitle">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ù¾ÙˆØ³Øª Ùˆ Ø²ÛŒØ¨Ø§ÛŒÛŒ</p>
            </div>
        </div>
    </section>

    <!-- Blog Articles -->
    <section class="section">
        <div class="container">
            <div style="display: grid; grid-template-columns: 1fr 300px; gap: var(--spacing-xl);">
                <!-- Articles Grid -->
                <div>
                    <div class="grid grid-2" id="blog-articles">
                        <!-- Articles will be loaded here -->
                    </div>
                </div>

                <!-- Sidebar -->
                <div>
                    <!-- Categories -->
                    <div class="card mb-3">
                        <div class="card-content">
                            <h3 class="mb-2">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h3>
                            <div id="blog-categories"
                                style="display: flex; flex-direction: column; gap: var(--spacing-sm);">
                                <!-- Categories will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Popular Tags -->
                    <div class="card">
                        <div class="card-content">
                            <h3 class="mb-2">Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨</h3>
                            <div id="popular-tags" style="display: flex; flex-wrap: wrap; gap: var(--spacing-sm);">
                                <!-- Tags will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>Â© 1402 ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª | ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù„ÙˆØ§Ø²Ù… Ø¢Ø±Ø§ÛŒØ´ÛŒ Ùˆ Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ</p>
            </div>
        </div>
    </footer>

    <style>
        .tag {
            padding: var(--spacing-xs) var(--spacing-md);
            background: var(--bg-accent);
            color: var(--primary);
            border-radius: var(--radius-lg);
            font-size: var(--font-size-sm);
            transition: all var(--transition-fast);
        }

        .tag:hover {
            background: var(--primary);
            color: white;
        }

        .category-link {
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            display: block;
        }

        .category-link:hover {
            background: var(--bg-accent);
            color: var(--primary);
        }

        .category-link.active {
            background: var(--primary);
            color: white;
        }
    </style>

    <!-- Scripts -->
    <script src="js/blog-data.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // State
        let currentCategory = 'all';
        let currentSearch = '';

        // Load Blog Articles
        function loadBlogArticles() {
            const grid = document.getElementById('blog-articles');
            if (!grid) return;

            let filteredArticles = blogArticles;

            // Filter by Category
            if (currentCategory !== 'all') {
                filteredArticles = filteredArticles.filter(article => article.category === currentCategory);
            }

            // Filter by Search
            if (currentSearch) {
                const term = currentSearch.toLowerCase();
                filteredArticles = filteredArticles.filter(article =>
                    article.title.toLowerCase().includes(term) ||
                    article.excerpt.toLowerCase().includes(term) ||
                    article.content.toLowerCase().includes(term)
                );
            }

            if (filteredArticles.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: var(--spacing-xl);">
                        <p>Ù‡ÛŒÚ† Ù…Ù‚Ø§Ù„Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>
                        <button onclick="resetFilters()" class="btn btn-primary mt-2">Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ù„Ø§Øª</button>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredArticles.map(article => `
                <div class="card">
                    <div class="card-image">
                        <img src="${article.image}" alt="${article.title}" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="card-content">
                        <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);">
                            <span style="background: var(--primary); color: white; padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--radius-sm); font-size: var(--font-size-xs);">
                                ${article.category}
                            </span>
                        </div>
                        <h3 class="card-title">${article.title}</h3>
                        <p class="card-description">${article.excerpt}</p>
                        <div class="flex-between mt-2" style="font-size: var(--font-size-sm); color: var(--text-secondary);">
                            <span>ğŸ‘¤ ${article.author}</span>
                            <span>â±ï¸ ${article.readTime}</span>
                        </div>
                        <div class="flex-between mt-2" style="font-size: var(--font-size-sm); color: var(--text-secondary);">
                            <span>ğŸ“… ${article.date}</span>
                        </div>
                        <a href="blog-article.html?id=${article.id}" class="btn btn-primary mt-2" style="width: 100%;">
                            Ø§Ø¯Ø§Ù…Ù‡ Ù…Ø·Ù„Ø¨
                        </a>
                    </div>
                </div>
            `).join('');
        }

        // Load Categories
        function loadCategories() {
            const container = document.getElementById('blog-categories');
            if (!container) return;

            const allCount = blogArticles.length;

            container.innerHTML = `
                <a href="#" onclick="filterByCategory('all', event)" class="category-link ${currentCategory === 'all' ? 'active' : ''}">
                    Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ù„Ø§Øª (${allCount})
                </a>
                ${blogCategories.map(cat => `
                    <a href="#" onclick="filterByCategory('${cat.name}', event)" class="category-link ${currentCategory === cat.name ? 'active' : ''}">
                        ${cat.name} (${cat.count})
                    </a>
                `).join('')}
            `;
        }

        // Load Popular Tags
        function loadPopularTags() {
            const container = document.getElementById('popular-tags');
            if (!container) return;

            container.innerHTML = popularTags.map(tag => `
                <a href="#" onclick="searchByTag('${tag}', event)" class="tag">${tag}</a>
            `).join('');
        }

        // Filter Actions
        function filterByCategory(category, event) {
            if (event) event.preventDefault();
            currentCategory = category;
            loadBlogArticles();
            updateActiveCategory();
        }

        function searchByTag(tag, event) {
            if (event) event.preventDefault();
            const searchInput = document.getElementById('blog-search');
            if (searchInput) {
                searchInput.value = tag;
                currentSearch = tag;
                loadBlogArticles();
            }
        }

        function resetFilters() {
            currentCategory = 'all';
            currentSearch = '';
            const searchInput = document.getElementById('blog-search');
            if (searchInput) searchInput.value = '';
            loadBlogArticles();
            updateActiveCategory();
        }

        function updateActiveCategory() {
            // Re-render categories to update active class
            loadCategories();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            // Setup Search
            const searchInput = document.getElementById('blog-search');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    currentSearch = e.target.value;
                    loadBlogArticles();
                });
            }

            // Check URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const categoryParam = urlParams.get('category');
            if (categoryParam) {
                currentCategory = categoryParam;
            }

            loadBlogArticles();
            loadCategories();
            loadPopularTags();
        });
    </script>
</body>

</html>